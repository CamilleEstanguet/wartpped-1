<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <title>Wartpped1</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="styleIndex.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="media/favicon.png" />
    <audio id="laudio" src="media/media_space_ambience.mp3" loop></audio>
    <script>
        function changerSon(son) {
            var leSon = document.getElementById('son1').className;
            var audio = document.getElementById('laudio');
            if (leSon == "fas fa-volume-mute soundOff") {
                leSon = "fas fa-volume-up soundOn";
                document.getElementById("laudio").play();
                audio.muted = false;
            }

            else {
                leSon = "fas fa-volume-mute soundOff";
                audio.muted = true;
            }
            document.getElementById('son1').className = leSon;
            document.getElementById('son2').className = leSon;
        }

        function changerIconesMenu(burger) {
            var buttun = document.getElementById("burgerButtun").textContent;
            if (buttun == "☰") {
                document.getElementById("burgerButtun").textContent = "✖";
            } else {
                document.getElementById("burgerButtun").textContent = "☰";
            }
        }
    </script>
</head>

<body>
    <header>
        <a href="index.html"><img class="logo" src="media/logo.png"></a>
        <div id="lesIcones" class="box-icons" for="toggle">
            <i id="son1" class="fas fa-volume-mute soundOff" onclick="changerSon('son')"></i>
            <a href="test.zip" download><i class="fas fa-download download"></i></a>
        </div>
    </header>
    <div class="slidecontainer" id="range">
        <output class="bullet" id="range-bullet">1917</output>
        <input type="range" min="1917" max="2022" value="1917" class="slider" id="range-line">

        <script>
            var range = document.getElementById("range-line");
            var bullet = document.getElementById("range-bullet");
            range.addEventListener("input", () => { setBullet(range, bullet); });
            async function setBullet(range, bullet) {
                const response = await fetch('./oeuvre.json');
                const oeuvres = await response.json();
                const val = range.value;
                const min = range.min ? range.min : 0;
                const max = range.max ? range.max : 100;
                const newVal = Number(((val - min) * 100) / (max - min));
                bullet.innerHTML = val;
                bullet.style.left = `calc(${newVal}% + (${8 - newVal * 0.15}px))`;
                for (i=0;i<8;i++) {
                        if (oeuvres[i].date[1] <= range.value && oeuvres[i].date[2] >= range.value) {
                            document.getElementById(oeuvres[i].titre).style.display = "block";
                            console.log("J affiche");
                        }
                        else {
                            document.getElementById(oeuvres[i].titre).style.display = "none";
                            console.log("J affiche pas");
                        }
                    }
                
            }
        </script>

    </div>
    <label id="burgerButtun" class="box-icons" for="toggle" onclick="changerIconesMenu(burgerButtun)">☰</label>
    <input type="checkbox" id="toggle">
    <ul class="menu">
        <li><a href="art_in_situ.html">L'art in situ</a></li>
        <li><a href="land_art.html">Le land art</a></li>
        <li><a href="origine.html">L'origine</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><i id="son2" class="fas fa-volume-mute soundOff" onclick="changerSon('son')"></i>
            <a href="test.zip" download><i class="fas fa-download download"></i></a>
        </li>
    </ul>
    <i id="toggleSlider" class="fas fa-chevron-up chevronUp" onclick="showRange()"></i>
    <i id="hideSlider" class="fas fa-chevron-down chevronDown" onclick="hideRange()"></i>
    <i id="toggleSliderResponsive" class="fa fa-chevron-right chevronRight" onclick="showRangeResponsive()"></i>
    <i id="hideSliderResponsive" class="fa fa-chevron-left chevronLeft" onclick="hideRangeResponsive()"></i>
    <script src="js/three.js"></script>
    <script src="js/main.js"></script>

    <div class="lesPins">
        <h3>Oeuvres disponibles</h3>
        <a href="./page-oeuvres.html" onclick="sauvegardeFish()" name="Fish" id="Fish">Fish</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeEisvirus()" name="Eisvirus" id="Eisvirus">Eisvirus</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeArc_de_Triomphe_Wrapped()" name="Arc de Triomphe Wrapped"id="Arc de Triomphe Wrapped">Arc de Triomphe Wrapped</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeLevitated_Mass()" name="Levitated Mass"id="Levitated Mass">Levitated Mass</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeSun_Tunnels()" name="Sun Tunnels" id="Sun Tunnels">Sun Tunnels</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeWave_field()" name="Wave field" id="Wave field">Wave field</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeTibesti()" name="Tibesti" id="Tibesti">Tibesti</a>
        <a href="./page-oeuvres.html" onclick="sauvegardeBunjil_Geoglyph()" name="Bunjil Geoglyph"id="Bunjil Geoglyph">Bunjil Geoglyph</a>
    </div>


    <script>
        let slider = document.getElementById("range");
        let up = document.getElementById("toggleSlider");
        let down = document.getElementById("hideSlider");
        let right = document.getElementById("toggleSliderResponsive");
        let left = document.getElementById("hideSliderResponsive");
        function showRange() {
            slider.style.display = "block";
            up.style.display = "none";
            down.style.display = "block";
            right.style.display = "none";
            left.style.display = "none";
        }
        function hideRange() {
            slider.style.display = "none";
            down.style.display = "none";
            up.style.display = "block";
            right.style.display = "none";
            left.style.display = "none";
        }
        function showRangeResponsive() {
            slider.style.display = "block";
            up.style.display = "none";
            down.style.display = "none";
            right.style.display = "none";
            left.style.display = "block";
        }
        function hideRangeResponsive() {
            slider.style.display = "none";
            down.style.display = "none";
            up.style.display = "none";
            right.style.display = "block";
            left.style.display = "none";
        }

        function sauvegardeFish() {
            var nomOeuvreVoulue = document.getElementById("Fish").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeEisvirus() {
            var nomOeuvreVoulue = document.getElementById("Eisvirus").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeArc_de_Triomphe_Wrapped() {
            var nomOeuvreVoulue = document.getElementById("Arc de Triomphe Wrapped").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeLevitated_Mass() {
            var nomOeuvreVoulue = document.getElementById("Levitated Mass").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeSun_Tunnels() {
            var nomOeuvreVoulue = document.getElementById("Sun Tunnels").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeWave_field() {
            var nomOeuvreVoulue = document.getElementById("Wave field").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeTibesti() {
            var nomOeuvreVoulue = document.getElementById("Tibesti").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }

        function sauvegardeBunjil_Geoglyph() {
            var nomOeuvreVoulue = document.getElementById("Bunjil Geoglyph").name;
            localStorage.setItem("nomOeuvreVoulue", nomOeuvreVoulue);
        }
    </script>
</body>

</html>